webpackJsonp([1],{"+/MR":function(e,t){},"2MEc":function(e,t){},BVza:function(e,t){},Jg3v:function(e,t){},KvVh:function(e,t){},LBjC:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("pRsR"),n("BVza");var a=n("mtrD"),o=n.n(a),r=(n("KvVh"),n("+vil")),s=n.n(r),i=n("7+uW"),c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var l=n("VU/8")({name:"App",mounted:function(){}},c,!1,function(e){n("Jg3v")},null,null).exports,u=n("/ocq"),d=(n("hLqQ"),n("yg6k")),f=n.n(d),p=n("mvHQ"),h=n.n(p),m=(n("kojI"),n("2X9z")),v=n.n(m),y=(n("2MEc"),n("+TD8")),g=n.n(y),b=n("//Fk"),w=n.n(b),k=n("fZjL"),C=n.n(k),E=n("mtWM"),_=n.n(E).a.create({baseURL:"",timeout:1e4,headers:{"Content-Type":"application/json"}});_.interceptors.request.use(function(e){return e},function(e){return w.a.reject(e)}),_.interceptors.response.use(function(e){return e.data},function(e){return w.a.reject(e)});var x=_,R="/api/search",T="/api/lyric",W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(C()(e)){var t="?";for(var n in e){var a=e[n];""!==a&&(t+=n+"="+encodeURIComponent(a)+"&")}return t=t.replace(/&$/,"")}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keywords:"",limit:"10",offset:""};return x.get(""+R+W(e))},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};return x.get(""+T+W(e))},M={data:function(){return{keywords:"",songs:[],song:{},lyric:""}},methods:{querySearchAsync:function(e,t){var n=this;e&&j({keywords:e,limit:"10"}).then(function(e){var a=e.result.songs.map(function(e){return{id:e.id,value:e.name+" "+(0 in e.artists&&e.artists[0].name||"")}});n.songs=a,n.song=a[0]||{},t(a)}).catch(function(e){})},handleSelect:function(e){this.song=e},openConfirm:function(){var e=this,t=this.song,n=t.id,a=t.value,o=this.$createElement;return n?n&&L({id:n}).then(function(t){var n=t.lrc,r=(n=void 0===n?{}:n).lyric,s=void 0===r?"":r;if(!s)return w.a.reject(new Error("暂无该歌曲歌词"));var i=s.replace(/[\d\.:\[\]]/g,"");e.lyric=i,g.a.confirm("","",{message:o("p",[o("h3",{},a),i]),confirmButtonText:"复制到剪贴板",cancelButtonText:"取消",lockScroll:!1,closeOnClickModal:!1,customClass:"lyric-confirm-style"}).then(function(){e.copyToClipBoard(e.song.value+e.lyric),v()({type:"success",message:"复制成功"})}).catch(function(){v()({type:"fail",message:"取消复制"})})}).catch(function(e){return w.a.reject(e)}):w.a.reject(new Error("暂无该歌曲"))},callWebWallet:function(){this.keywords&&window.postMessage({target:"contentscript",data:{to:"n1dtgvNzhHHfoKsY28XbtNZkdKTQsqwW4v2",value:"0",contract:{function:"save",args:""}},method:"neb_sendTransaction"},"*"),window.addEventListener("message",this.handleTransitonResult)},handleTransitonResult:function(e){console.log("message received, msg.data: "+h()(e.data)),e&&e.data&&e.data.data&&e.data.data.txhash&&(this.openConfirm().catch(function(e){v()({type:"fail",message:e.message})}),console.log("Transaction hash:\n"+h()(e.data.data.txhash,null,"\t")))},copyToClipBoard:function(e){var t=document.createElement("input");t.setAttribute("readonly","readonly"),t.setAttribute("value",e),document.body.appendChild(t),t.select(),t.setSelectionRange(0,9999),document.execCommand("copy")&&(document.execCommand("copy"),console.log("复制成功")),document.body.removeChild(t)},handleKeyPress:function(e){13==e.keyCode&&(this.callWebWallet(),this.$refs.input.blur&&this.$refs.input.blur())}},mounted:function(){var e=this.$createElement;f()({title:"提示",message:e("p",[e("span",{},"需要安装"),e("a",{style:{marginLeft:"10px",color:"#4560E6",textDecoration:"none"},attrs:{href:"https://github.com/nebulasio/WebExtensionWallet"}},"WebExtensionWallet")]),duration:5e3})},destroyed:function(){window.removeEventListener("message",this.handleTransitonResult)}},B={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-wrapper"},[e._m(0),e._v(" "),n("el-autocomplete",{ref:"input",staticClass:"input-style",attrs:{"fetch-suggestions":e.querySearchAsync,"trigger-on-focus":!1,placeholder:"输入歌曲名",debounce:500},on:{select:e.handleSelect},nativeOn:{keypress:function(t){return e.handleKeyPress(t)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-search","native-type":"submit",disabled:!e.keywords},on:{click:e.callWebWallet}},[e._v("\n  搜索\n  ")])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-header"},[t("h1",{staticClass:"css1268f443d21d160",staticStyle:{color:"#4560E6"}},[this._v("\n      星云有歌词\n    ")]),this._v(" "),t("h3",{staticStyle:{"font-family":"'Malapropism'",color:"#4560E6"}},[this._v("Nebulas Lyric")])])}]};var S=n("VU/8")(M,B,!1,function(e){n("LBjC")},"data-v-2a02f061",null).exports;i.default.use(u.a);var $=new u.a({routes:[{path:"/",name:"index",component:S}]});n("+/MR");i.default.component(s.a.name,s.a),i.default.component(o.a.name,o.a),i.default.config.productionTip=!1,new i.default({el:"#app",router:$,components:{App:l},template:"<App/>"})},hLqQ:function(e,t){},kojI:function(e,t){},pRsR:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.940554967f718c355bc1.js.map